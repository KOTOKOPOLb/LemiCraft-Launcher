<Window x:Class="LemiCraft_Launcher.Windows.ElyByLoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
        Title="Ely.by — Войдите в аккаунт"
        Height="700"
        Width="1000"
        WindowStyle="None"
        ResizeMode="CanResize"
        Background="Transparent"
        AllowsTransparency="True"
        WindowStartupLocation="CenterOwner"
        MinHeight="500"
        MinWidth="700">

    <Border Background="#0F172A"
            CornerRadius="12"
            BorderBrush="#374151"
            BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="50"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Border Grid.Row="0"
                    Background="#1E293B"
                    CornerRadius="12,12,0,0"
                    MouseLeftButtonDown="TitleBar_MouseDown">
                <Grid Margin="20,0">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="🔷" FontSize="18" Margin="0,0,10,0"/>
                        <TextBlock Text="Ely.by — Авторизация для скинов"
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Foreground="White"
                                   VerticalAlignment="Center"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button Content="−"
                                Width="35" Height="35"
                                Background="Transparent"
                                Foreground="White"
                                BorderThickness="0"
                                FontSize="18"
                                Cursor="Hand"
                                Click="MinimizeButton_Click">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="b" Background="{TemplateBinding Background}" CornerRadius="6">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="b" Property="Background" Value="#374151"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>

                        <Button Content="×"
                                Width="35" Height="35"
                                Background="Transparent"
                                Foreground="White"
                                BorderThickness="0"
                                FontSize="20"
                                Cursor="Hand"
                                Margin="4,0,0,0"
                                Click="CloseButton_Click">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="b" Background="{TemplateBinding Background}" CornerRadius="6">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="b" Property="Background" Value="#EF4444"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <Border Grid.Row="1"
                    Background="#1E3A5F"
                    Padding="20,12">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ℹ️" FontSize="16" Margin="0,0,10,0" VerticalAlignment="Center"/>
                    <TextBlock TextWrapping="Wrap"
                               VerticalAlignment="Center"
                               Foreground="#93C5FD"
                               FontSize="13">
                        <Run Text="Войдите в свой аккаунт Ely.by ниже. Куки сохранятся только в памяти лаунчера и не передаются третьим лицам"/>
                    </TextBlock>

                    <Border x:Name="StatusBadge"
                            Background="#374151"
                            CornerRadius="6"
                            Padding="10,4"
                            Margin="20,0,0,0"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center">
                        <TextBlock x:Name="StatusText"
                                   Text="⏳ Ожидание входа..."
                                   Foreground="#9CA3AF"
                                   FontSize="12"
                                   FontWeight="Medium"/>
                    </Border>
                </StackPanel>
            </Border>

            <wv2:WebView2 x:Name="WebView"
                          Grid.Row="2"
                          NavigationCompleted="WebView_NavigationCompleted"
                          CoreWebView2InitializationCompleted="WebView_CoreWebView2InitializationCompleted"/>

            <Border Grid.Row="3"
                    Background="#1E293B"
                    CornerRadius="0,0,12,12"
                    Padding="20,12">
                <Grid>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock x:Name="PageUrlText"
                                   Text="https://ely.by"
                                   FontSize="11"
                                   Foreground="#6B7280"
                                   VerticalAlignment="Center"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button x:Name="ExtractButton"
                                Content="✅ Я вошёл — Получить доступ к скинам"
                                Height="38"
                                Padding="20,0"
                                Background="#22C55E"
                                Foreground="White"
                                BorderThickness="0"
                                FontSize="13"
                                FontWeight="SemiBold"
                                Cursor="Hand"
                                IsEnabled="False"
                                Click="ExtractButton_Click">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="b"
                                            Background="{TemplateBinding Background}"
                                            CornerRadius="8"
                                            Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="b" Property="Background" Value="#16A34A"/>
                                        </Trigger>
                                        <Trigger Property="IsEnabled" Value="False">
                                            <Setter TargetName="b" Property="Background" Value="#374151"/>
                                            <Setter Property="Foreground" Value="#6B7280"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>
